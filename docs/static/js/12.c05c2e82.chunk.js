(this.webpackJsonpedu=this.webpackJsonpedu||[]).push([[12],{157:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return k}));var a=n(149),i=n(0),r=n(147),c=n(156),o=n(148),s=n(67),u={light:{login:"/api/login",list:"/api/list",myBooks:"/api/my_books",detail:"/api/detail/"}},l=n(116),d=n.n(l),m=n(117),p=n(152),f=n(118),g=n.n(f);g.a.defaults.baseURL="https://efficacious-tiny-infinity.glitch.me",g.a.interceptors.request.use((function(t){if(t.headers.token=localStorage.getItem("token")||"",!1!==t.isNeedExtraData){var e={userId:1};"get"===t.method?t.params=Object(p.a)(Object(p.a)({},e),t.data):t.data=Object(p.a)(Object(p.a)({},e),t.data)}return t}),(function(t){return Promise.reject(t)})),g.a.interceptors.response.use((function(t){return 200===t.data.code?t.data:400===t.data.code?(r.b.warning(t.data.message),t.data):Promise.reject(t)}));var h,j=function(){var t=Object(m.a)(d.a.mark((function t(e){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b={light:{login:function(t){return j({url:u.light.login,data:t,method:"post"})},list:function(){return j({url:u.light.list})},myBooks:function(t,e){return j({url:u.light.myBooks,data:t,method:e})},detail:function(t){return j({url:u.light.detail+t})}}},v=n(25),O=n(3);function k(t){var e=Object(i.useState)("admin"),n=Object(a.a)(e,2),u=n[0],l=n[1],d=Object(i.useState)("123456"),m=Object(a.a)(d,2),p=m[0],f=m[1],g=function(){""!==u.trim()?""!==p.trim()?(!function(){h=setTimeout((function(){v.a.dispatch({type:"SET_LIGHT_STATE",key:["isLoading"],value:!0})}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}(),b.light.login({username:u,password:p}).then((function(e){200===e.code&&(t.history.push("/light/index"),clearTimeout(h),v.a.dispatch({type:"SET_LIGHT_STATE",key:["isLoading"],value:!1}))}))):r.b.info("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"):r.b.info("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a")};return Object(O.jsx)("div",{className:"m-login-wrap",children:Object(O.jsxs)("div",{className:"m-login",children:[Object(O.jsxs)("div",{className:"m-login-row",children:[Object(O.jsx)(s.a,{name:"username",className:"m-login-icon"}),Object(O.jsx)(c.a,{value:u,onChange:function(t){return l(t.target.value)},placeholder:"\u7528\u6237\u540d",className:"m-login-input",autoFocus:!0})]}),Object(O.jsxs)("div",{className:"m-login-row",children:[Object(O.jsx)(s.a,{name:"password",className:"m-login-icon"}),Object(O.jsx)(c.a,{value:p,type:"password",onChange:function(t){return f(t.target.value)},onKeyUp:function(t){return function(t){13===t.keyCode&&g()}(t)},placeholder:"\u5bc6\u7801",className:"m-login-input"})]}),Object(O.jsx)("div",{className:"m-login-btn-wrap",children:Object(O.jsx)(o.a,{onClick:function(){return g()},children:"\u767b\u5f55"})})]})})}},67:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n(0);var a=n(3);function i(t){var e=t.name,n=t.className;return Object(a.jsx)("span",{className:"icon iconfont icon-".concat(e," ").concat(n||""),onClick:t.onClick})}}}]);
//# sourceMappingURL=12.c05c2e82.chunk.js.map