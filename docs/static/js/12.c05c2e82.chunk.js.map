{"version":3,"sources":["api/urls.js","api/lightUrls.js","api/common.js","utils/tools.js","api/index.js","api/lightApi.js","views/light/login/Login.js","components/light/Icon.js"],"names":["urls","light","login","list","myBooks","detail","axios","defaults","baseURL","interceptors","request","use","config","headers","token","localStorage","getItem","isNeedExtraData","extraData","userId","method","params","data","err","Promise","reject","response","res","code","message","warning","timer","common","a","Api","url","id","Login","props","useState","username","setUsername","password","setPassword","handleLogin","trim","setTimeout","store","dispatch","type","key","value","showLoading","then","history","push","clearTimeout","info","className","Icon","name","onChange","e","target","placeholder","autoFocus","onKeyUp","keyCode","handleEnter","onClick"],"mappings":"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","file":"static/js/12.c05c2e82.chunk.js","sourcesContent":["import light from \"./lightUrls\"\r\n\r\nconst urls = {\r\n  light,\r\n}\r\n\r\nexport default urls\r\n","const urls = {\r\n  login: '/api/login',\r\n  list: '/api/list',\r\n  myBooks: '/api/my_books',\r\n  detail: '/api/detail/'\r\n}\r\n\r\nexport default urls","import axios from \"axios\"\r\nimport { message } from 'antd'\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  axios.defaults.baseURL = 'http://localhost:81' //\"http://localhost:81\"\r\n} else {\r\n  axios.defaults.baseURL = 'https://efficacious-tiny-infinity.glitch.me'\r\n}\r\n\r\naxios.interceptors.request.use(\r\n  (config) => {\r\n    config.headers.token = localStorage.getItem(\"token\") || \"\"\r\n\r\n    if (config.isNeedExtraData !== false) {\r\n      let extraData = { userId: 1 }\r\n      if (config.method === \"get\") {\r\n        config.params = { ...extraData, ...config.data }\r\n      } else {\r\n        config.data = { ...extraData, ...config.data }\r\n      }\r\n    }\r\n    return config\r\n  },\r\n  (err) => {\r\n    return Promise.reject(err)\r\n  }\r\n)\r\n\r\naxios.interceptors.response.use(\r\n  (res) => {\r\n    if (res.data.code === 200) {\r\n      return res.data\r\n    } else if (res.data.code === 400) {\r\n      message.warning(res.data.message)\r\n      return res.data\r\n    } else {\r\n      return Promise.reject(res)\r\n    }\r\n  }\r\n)\r\n\r\nexport const common = async (config) => {\r\n  let res = await axios(config)\r\n  return res\r\n}\r\n","import store from '../store'\r\n\r\nlet timer\r\n\r\nconst showLoading = (delay = 0) => {\r\n  timer = setTimeout(() => {\r\n    store.dispatch({\r\n      type: 'SET_LIGHT_STATE',\r\n      key: ['isLoading'],\r\n      value: true,\r\n    })\r\n  }, delay)\r\n}\r\n\r\nconst hideLoading = () => {\r\n  clearTimeout(timer)\r\n  store.dispatch({\r\n    type: 'SET_LIGHT_STATE',\r\n    key: ['isLoading'],\r\n    value: false,\r\n  })\r\n}\r\n\r\nexport {\r\n  showLoading,\r\n  hideLoading,\r\n} ","import light from './lightApi'\r\n\r\nconst Api = {\r\n  light\r\n}\r\n\r\nexport default Api\r\n\r\n\r\n\r\n","import urls from './urls'\r\nimport { common } from './common'\r\n\r\nconst Api = {\r\n  login: (data) => common({ url: urls.light.login, data, method: 'post' }),\r\n  list: () => common({ url: urls.light.list }),\r\n  myBooks: (data, method) => common({ url: urls.light.myBooks, data, method }),\r\n  detail: (id) => common({ url: urls.light.detail + id })\r\n}\r\n\r\nexport default Api","import React, { useState } from 'react'\r\nimport { Button, Input, message } from 'antd'\r\nimport Icon from '../../../components/light/Icon'\r\nimport Api from '../../../api'\r\nimport { showLoading, hideLoading } from '../../../utils/tools'\r\n\r\nexport default function Login(props) {\r\n  const [username, setUsername] = useState('admin')\r\n  const [password, setPassword] = useState('123456')\r\n\r\n  const handleEnter = (e) => {\r\n    if (e.keyCode === 13) {\r\n      handleLogin()\r\n    }\r\n  }\r\n\r\n  const handleLogin = () => {\r\n    if (username.trim() === '') {\r\n      message.info('用户名不能为空')\r\n      return\r\n    } else if (password.trim() === '') {\r\n      message.info('密码不能为空')\r\n      return\r\n    }\r\n    showLoading()\r\n    Api.light.login({ username, password }).then(res => {\r\n      if (res.code === 200) {\r\n        props.history.push('/light/index')\r\n        hideLoading()\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"m-login-wrap\">\r\n      <div className=\"m-login\">\r\n        <div className=\"m-login-row\">\r\n          <Icon name=\"username\" className=\"m-login-icon\"></Icon>\r\n          <Input\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            placeholder=\"用户名\"\r\n            className=\"m-login-input\"\r\n            autoFocus\r\n          />\r\n        </div>\r\n        <div className=\"m-login-row\">\r\n          <Icon name=\"password\" className=\"m-login-icon\"></Icon>\r\n          <Input\r\n            value={password}\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            onKeyUp={(e) => handleEnter(e)}\r\n            placeholder=\"密码\"\r\n            className=\"m-login-input\"\r\n          />\r\n        </div>\r\n        <div className=\"m-login-btn-wrap\">\r\n          <Button onClick={() => handleLogin()}>登录</Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React from \"react\"\r\n\r\nexport default function Icon(props) {\r\n  let { name, className } = props\r\n  return (\r\n    <span\r\n      className={`icon iconfont icon-${name} ${className ? className : \"\"}`}\r\n      onClick={props.onClick}\r\n    ></span>\r\n  )\r\n}\r\n"],"sourceRoot":""}