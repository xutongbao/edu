(this.webpackJsonpedu=this.webpackJsonpedu||[]).push([[5],{135:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return k}));var a=n(128),i=n(0),r=n(126),c=n(134),o=n(127),s=n(3);function u(e){var t=e.name,n=e.className;return Object(s.jsx)("span",{className:"icon iconfont icon-".concat(t," ").concat(n||""),onClick:e.onClick})}var l={light:{login:"/api/login",list:"/api/list",myBooks:"/api/my_books",detail:"/api/detail/"}},d=n(96),m=n.n(d),p=n(97),h=n(130),f=n(98),g=n.n(f);g.a.defaults.baseURL="https://efficacious-tiny-infinity.glitch.me",g.a.interceptors.request.use((function(e){if(e.headers.token=localStorage.getItem("token")||"",!1!==e.isNeedExtraData){var t={userId:1};"get"===e.method?e.params=Object(h.a)(Object(h.a)({},t),e.data):e.data=Object(h.a)(Object(h.a)({},t),e.data)}return e}),(function(e){return Promise.reject(e)})),g.a.interceptors.response.use((function(e){return 200===e.data.code?e.data:400===e.data.code?(r.b.warning(e.data.message),e.data):Promise.reject(e)}));var j,b=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v={light:{login:function(e){return b({url:l.light.login,data:e,method:"post"})},list:function(){return b({url:l.light.list})},myBooks:function(e,t){return b({url:l.light.myBooks,data:e,method:t})},detail:function(e){return b({url:l.light.detail+e})}}},O=n(24);function k(e){var t=Object(i.useState)("admin"),n=Object(a.a)(t,2),l=n[0],d=n[1],m=Object(i.useState)("123456"),p=Object(a.a)(m,2),h=p[0],f=p[1],g=function(){""!==l.trim()?""!==h.trim()?(!function(){j=setTimeout((function(){O.a.dispatch({type:"SET_LIGHT_STATE",key:["isLoading"],value:!0})}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}(),v.light.login({username:l,password:h}).then((function(t){200===t.code&&(e.history.push("/light/index"),clearTimeout(j),O.a.dispatch({type:"SET_LIGHT_STATE",key:["isLoading"],value:!1}))}))):r.b.info("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"):r.b.info("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a")};return Object(s.jsx)("div",{className:"m-wrap",children:Object(s.jsxs)("div",{className:"m-login",children:[Object(s.jsxs)("div",{className:"m-login-row",children:[Object(s.jsx)(u,{name:"username",className:"m-login-icon"}),Object(s.jsx)(c.a,{value:l,onChange:function(e){return d(e.target.value)},placeholder:"\u7528\u6237\u540d",className:"m-login-input",autoFocus:!0})]}),Object(s.jsxs)("div",{className:"m-login-row",children:[Object(s.jsx)(u,{name:"password",className:"m-login-icon"}),Object(s.jsx)(c.a,{value:h,type:"password",onChange:function(e){return f(e.target.value)},onKeyUp:function(e){return function(e){13===e.keyCode&&g()}(e)},placeholder:"\u5bc6\u7801",className:"m-login-input"})]}),Object(s.jsx)("div",{className:"m-login-btn-wrap",children:Object(s.jsx)(o.a,{onClick:function(){return g()},children:"\u767b\u5f55"})})]})})}}}]);
//# sourceMappingURL=5.c1acb601.chunk.js.map