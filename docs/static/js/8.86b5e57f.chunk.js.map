{"version":3,"sources":["views/light/index/offline/companyMgt/companyList/config.js","api/lightUrls.js","api/urls.js","api/common.js","api/index.js","api/lightApi.js","views/light/index/offline/companyMgt/companyList/CompanyList copy.js"],"names":["columns","title","dataIndex","fixed","render","text","src","className","alt","0","1","record","updateTime","urls","light","login","list","myBooks","detail","comapny","axios","defaults","baseURL","interceptors","request","use","config","headers","token","localStorage","getItem","method","params","data","err","Promise","reject","response","res","code","message","warning","common","a","Api","url","id","company","CompanyList","props","useState","setList","total","setTotal","current","setCurrent","pageSize","setPageSize","handlePage","page","size","then","useEffect","dataSource","rowKey","scroll","scrollToFirstRowOnChange","y","x","pagination","onChange","showSizeChanger","pageSizeOptions","onShowSizeChange","showTotal"],"mappings":"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","file":"static/js/8.86b5e57f.chunk.js","sourcesContent":["const columns = [\r\n  {\r\n    title: 'ID',\r\n    dataIndex: 'id',\r\n    fixed: 'left',\r\n  },\r\n  {\r\n    title: '商户名称',\r\n    dataIndex: 'companyName'\r\n  },  \r\n  {\r\n    title: '企业/学校名称',\r\n    dataIndex: 'schoolName'\r\n  },  \r\n  {\r\n    title: '电话/短信',\r\n    dataIndex: 'phone'\r\n  },  \r\n  {\r\n    title: 'logo',\r\n    dataIndex: 'logo',\r\n    render: (text) => (<img src={text} className=\"m-company-img\" alt={'图片'}></img>)\r\n  },  \r\n  {\r\n    title: '百度审核',\r\n    dataIndex: 'checkStatus',\r\n    render: (text) => {\r\n      let hook = {\r\n        0: '已通过',\r\n        1: '审核中'\r\n      }\r\n      return (<span className=\"m-company-check-status\">{hook[text]}</span>)\r\n    }\r\n  }, \r\n  {\r\n    title: '百度审核时间',\r\n    dataIndex: 'checkTime'\r\n  },\r\n  {\r\n    title: '添加/更新时间',\r\n    dataIndex: 'addTime',\r\n    render: (text, record) => {\r\n      return (<div>{`${text}  ${record.updateTime}`}</div>)\r\n    }\r\n  },\r\n  {\r\n    title: '运营人员',\r\n    dataIndex: 'operators'\r\n  },  \r\n  {\r\n    title: '发布状态',\r\n    dataIndex: 'releaseStatus',\r\n    render: (text) => {\r\n      let hook = {\r\n        0: '下架',\r\n        1: '上架'\r\n      }\r\n      return (<span className=\"m-company-check-status\">{hook[text]}</span>)\r\n    }    \r\n  }, \r\n]\r\n\r\nexport { columns }","const urls = {\r\n  login: '/api/login',\r\n  list: '/api/list',\r\n  myBooks: '/api/my_books',\r\n  detail: '/api/detail/',\r\n  comapny: '/api/company'\r\n}\r\n\r\nexport default urls","import light from \"./lightUrls\"\r\n\r\nconst urls = {\r\n  light,\r\n}\r\n\r\nexport default urls\r\n","import axios from 'axios'\r\nimport { message } from 'antd'\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n  axios.defaults.baseURL = 'http://localhost:81' //\"http://localhost:81\"\r\n} else {\r\n  axios.defaults.baseURL = 'https://efficacious-tiny-infinity.glitch.me'\r\n}\r\n\r\naxios.interceptors.request.use(\r\n  (config) => {\r\n    config.headers.token = localStorage.getItem('token') || ''\r\n\r\n    // if (config.isNeedExtraData !== false) {\r\n    //   let extraData = { userId: 1 }\r\n    //   if (config.method === \"get\") {\r\n    //     config.params = { ...extraData, ...config.data }\r\n    //   } else {\r\n    //     config.data = { ...extraData, ...config.data }\r\n    //   }\r\n    // }\r\n    if (config.method === 'get') {\r\n      config.params = { ...config.data }\r\n    } else {\r\n      config.data = { ...config.data }\r\n    }\r\n    return config\r\n  },\r\n  (err) => {\r\n    return Promise.reject(err)\r\n  }\r\n)\r\n\r\naxios.interceptors.response.use((res) => {\r\n  if (res.data.code === 200) {\r\n    return res.data\r\n  } else if (res.data.code === 400) {\r\n    message.warning(res.data.message)\r\n    return res.data\r\n  } else {\r\n    return Promise.reject(res)\r\n  }\r\n})\r\n\r\nexport const common = async (config) => {\r\n  let res = await axios(config)\r\n  return res\r\n}\r\n","import light from './lightApi'\r\n\r\nconst Api = {\r\n  light\r\n}\r\n\r\nexport default Api\r\n\r\n\r\n\r\n","import urls from './urls'\r\nimport { common } from './common'\r\n\r\nconst Api = {\r\n  login: (data) => common({ url: urls.light.login, data, method: 'post' }),\r\n  list: () => common({ url: urls.light.list }),\r\n  myBooks: (data, method) => common({ url: urls.light.myBooks, data, method }),\r\n  detail: (id) => common({ url: urls.light.detail + id }),\r\n  company: (data, method) => common({ url: urls.light.comapny, data, method })\r\n}\r\n\r\nexport default Api","import React, { useEffect, useState } from 'react'\r\nimport { Table } from 'antd'\r\nimport Api from '../.././../../../../api'\r\nimport { columns } from './config'\r\n//import MyTable from '../../../../../../components/light/MyTable'\r\n\r\nexport default function CompanyList(props) {\r\n  const [list, setList] = useState([])\r\n  const [total, setTotal] = useState()\r\n  const [current, setCurrent] = useState(1)\r\n  const [pageSize, setPageSize] = useState(10)\r\n\r\n  const handlePage = (page, pageSize) => {\r\n    Api.light.company({ page, size: pageSize }, 'get').then((res) => {\r\n      if (res.code === 200) {\r\n        setList(res.data.list)\r\n        setTotal(res.data.total)\r\n        setCurrent(res.data.current)\r\n        setPageSize(res.data.pageSize)\r\n      }\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    handlePage(current, pageSize)\r\n  }, [props])\r\n  return (\r\n    <div className=\"m-table-wrap\">\r\n      <Table\r\n        columns={columns}\r\n        dataSource={list}\r\n        rowKey=\"id\"\r\n        scroll={{ scrollToFirstRowOnChange: true, y: 500, x:true }}\r\n        pagination={{\r\n          current,\r\n          total,\r\n          pageSize,\r\n          onChange: (page, pageSize) => handlePage(page, pageSize),\r\n          showSizeChanger:true,\r\n          pageSizeOptions: [10, 20, 50],\r\n          onShowSizeChange: (current, size) => handlePage(current, size),\r\n          showTotal: total => `共有数据 ${total} 条`\r\n        }}\r\n      ></Table>\r\n    </div>\r\n  )\r\n}\r\n"],"sourceRoot":""}